<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- META TAGS -->
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Knowledge Base Theme</title>

    <link rel="shortcut icon" href="images/favicon.png"/>

    <!-- Style Sheet-->
    <link rel="stylesheet" href="style.css"/>
    <link rel='stylesheet' id='bootstrap-css-css' th:href="@{/css/bootstrap5152.css}"
          href='../static/css/bootstrap5152.css?ver=1.0' type='text/css'
          media='all'/>
    <link rel='stylesheet' id='responsive-css-css' th:href="@{/css/responsive5152.css}"
          href='../static/css/responsive5152.css?ver=1.0' type='text/css'
          media='all'/>
    <link rel='stylesheet' id='pretty-photo-css-css' th:href="@{/js/prettyphoto/prettyPhotoaeb9.css}"
          href='../static/js/prettyphoto/prettyPhotoaeb9.css?ver=3.1.4'
          type='text/css' media='all'/>
    <link rel='stylesheet' id='main-css-css' th:href="@{/css/main5152.css}" href='../static/css/main5152.css?ver=1.0'
          type='text/css' media='all'/>
    <link rel='stylesheet' id='custom-css-css' th:href="@{/css/custom5152.html}"
          href='../static/css/custom5152.html?ver=1.0' type='text/css' media='all'/>

</head>

<body>

<!-- Start of Header -->
<div th:replace="header :: header"></div>
<!-- End of Header -->

<div th:replace="header::inputFrame"></div>

<!-- Start of Page Container -->
<div class="page-container">
    <div class="container">
        <div class="row">

            <!-- start of page content -->
            <div class="span12 page-content">

                <article class="type-page hentry clearfix">

                    <h1 class="post-title">个人博客</h1>

                    <hr>

                    <header class="clearfix" th:each="article:${articles}">

                        <div>
                            <div style="display: inline-block;width: 50%">
                                <h3 class="post-title">
                                    <a th:href="@{'/article/show/'+${article.userName}+'/'+${article.principal}}"
                                       th:text="${article.title}"></a>
                                </h3>
                            </div>
                            <div style="display: inline-block;width: 48%;text-align: right">
                                <button class="btn-success" th:onclick="|updateArticle(${article.id})|"
                                        style="width: 80px;">修改
                                </button>
                                <button class="btn-danger" th:onclick="|deleteArticle(${article.id})|"
                                        style="width: 80px;">删除
                                </button>
                            </div>

                        </div>

                        <div class="post-meta clearfix">
                            <span class="date" th:text="${article.time}"></span>
                            <span class="comments" th:text="${article.readNumber}"></span>
                        </div><!-- end of post meta -->

                    </header>


                </article>
            </div>
            <!-- end of page content -->

        </div>
    </div>
</div>
<!-- End of Page Container -->

<div th:replace="footer :: foot"></div>

<a href="#top" id="scroll-top"></a>

<!-- script -->
<script type='text/javascript' th:src="@{/js/jquery-1.8.3.min.js}" src='../static/js/jquery-1.8.3.min.js'></script>
<script type='text/javascript' th:src="@{/js/jquery.easing.1.3.js}" src='../static/js/jquery.easing.1.3.js'></script>
<script type='text/javascript' th:src="@{/js/prettyphoto/jquery.prettyPhoto.js}"
        src='../static/js/prettyphoto/jquery.prettyPhoto.js'></script>
<script type='text/javascript' th:src="@{/js/jflickrfeed.js}" src='../static/js/jflickrfeed.js'></script>
<script type='text/javascript' th:src="@{/js/jquery.liveSearch.js}" src='../static/js/jquery.liveSearch.js'></script>
<script type='text/javascript' th:src="@{/js/jquery.form.js}" src='../static/js/jquery.form.js'></script>
<script type='text/javascript' th:src="@{/js/jquery.validate.min.js}"
        src='../static/js/jquery.validate.min.js'></script>
<script type='text/javascript' th:src="@{/js/custom.js}" src='../static/js/custom.js'></script>

<script>

    function deleteArticle(item) {
        $.ajax({
            url: "/user/article/delete",
            type: "post",
            data: {id: item},
            success: function (data) {
                alert(data.msg);
                window.location.reload();
            }
        });
    }

    function updateArticle(item) {
        window.location.href = "/user/article/editor/get?id=" + item;
    }

</script>

</body>

</html>